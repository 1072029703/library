!function(window,undefined){function Page(action,target,pageNo,pageSize,total){this.formid="form_"+bg.randomInt(),this.actionurl=action,this.target=target,this.paramMap={},this.params=function(){return this.paramMap},this.pageInfo=function(pageNo,pageSize,total){this.pageNo=pageNo,this.pageSize=pageSize,this.total=total,null!=total&&null!=pageSize&&null!=pageNo?(quotient=Math.floor(total/pageSize),this.maxPageNo=0==total%pageSize?quotient:quotient+1,this.startNo=(pageNo-1)*pageSize+1,this.endNo=this.startNo+pageSize-1<=total?this.startNo+pageSize-1:total):this.maxPageNo=1},this.pageInfo(pageNo,pageSize,total),this.action=function(actionurl){return this.actionurl=actionurl,this},this.orderBy=function(newstring){return this.orderby=newstring,this},this.target=function(givenTarget,elemId){return givenTarget?this.target=givenTarget:elemId&&(this.target=bg.findTarget(document.getElementById(elemId))),this},this.getForm=function(){return myForm=document.getElementById(this.formid),null==myForm&&(myForm=document.createElement("form"),myForm.setAttribute("id",this.formid),myForm.setAttribute("action",this.actionurl),myForm.setAttribute("method","POST"),document.getElementById(this.target)?document.getElementById(this.target).appendChild(myForm):document.body.appendChild(myForm)),myForm},this.addParams=function(paramSeq){bg.assert.notNull(paramSeq,"paramSeq for addHiddens must not be null"),this.paramstr=paramSeq;var i,name,value,paramArray=paramSeq.split("&");for(i=0;i<paramArray.length;i++)oneParam=paramArray[i],""!=oneParam&&(name=oneParam.substr(0,oneParam.indexOf("=")),value=oneParam.substr(oneParam.indexOf("=")+1),this.paramMap[name]=value);return this},this.checkPageParams=function(pageNo,pageSize,orderBy){if(null!=pageNo){if(!/^[1-9]\d*$/.test(pageNo))return bg.alert("输入分页的页码是:"+pageNo+",它不是个整数"),!1;null!=this.maxPageNo&&pageNo>this.maxPageNo&&(pageNo=this.maxPageNo),this.paramMap.pageNo=pageNo}if(null!=pageSize){if(!/^[1-9]\d*$/.test(pageSize))return bg.alert("输入分页的页长是:"+pageSize+",它不是个整数"),!1;this.paramMap.pageSize=pageSize}return null!=orderBy&&"null"!=orderBy&&(this.paramMap.orderBy=orderBy),!0},this.goPageNormal=function(){var key,value,myForm=document.createElement("form");myForm.setAttribute("action",this.actionurl),myForm.setAttribute("method","POST");for(key in this.paramMap)value=this.paramMap[key],""!=value&&bg.form.addInput(myForm,key,value,"hidden");document.body.appendChild(myForm),myForm.submit()},this.goPageAjax=function(){var key,value,submitBtnId,submitx,options_submit,myForm=this.getForm();for(key in this.paramMap)value=this.paramMap[key],""!=value&&bg.form.addInput(myForm,key,value,"hidden");submitBtnId=this.formid+"_submitx",submitx=document.getElementById(submitBtnId),null==submitx&&(submitx=document.createElement("button"),submitx.setAttribute("id",submitBtnId),submitx.setAttribute("type","submit"),submitx.style.display="none",myForm.appendChild(submitx)),options_submit={},options_submit.jqueryaction="button",options_submit.id=submitBtnId,options_submit.targets=this.target,options_submit.href=this.actionurl,options_submit.formids=this.formid,jQuery.struts2_jquery.bind(jQuery("#"+submitBtnId),options_submit),submitx.click()},this.goPage=function(pageNo,pageSize,orderBy){this.checkPageParams(pageNo,pageSize,orderBy)&&(this.target&&document.getElementById(this.target)?this.goPageAjax():this.goPageNormal())}}if(!beangle){var beangle=function(){return!0};beangle.extend=function(map){for(attr in map){var i,attrs=attr.split("."),obj=beangle;for(i=0;i<attrs.length-1;i++)obj[attrs[i]]=obj[attrs[i]]||{},obj=obj[attrs[i]];obj[attrs[attrs.length-1]]=map[attr]}},window.beangle=beangle,window.bg=beangle,beangle.ajaxhistory="undefined"!=typeof History&&"undefined"!=typeof History.Adapter,beangle.displayAjaxMessage=function(){var loadingMessage="Loading...",mz=document.getElementById("messageZone");if(mz)mz.innerHTML=loadingMessage,mz.style.visibility="visible";else{var mz=document.createElement("div");mz.setAttribute("id","messageZone"),mz.style.position="absolute",mz.style.zIndex="1000",mz.style.top="0px",mz.style.right="0px",mz.style.width="55px",mz.style.height="20px",mz.style.background="#F9EDBE",mz.style.padding="2px",document.body.appendChild(mz);var text=document.createTextNode(loadingMessage);mz.appendChild(text)}},beangle.hideAjaxMessage=function(){var mz=document.getElementById("messageZone");mz&&(mz.style.visibility="hidden")},beangle.history={init:function(){return"file:"===document.location.protocol?(alert("The HTML5 History API (and thus History.js) do not work on files, please upload it to a server."),void 0):(jQuery(document).ready(function(){History.Adapter.bind(window,"statechange",function(){var currState=History.getState();if("undefined"!=jQuery.type((currState.data||{}).container)&&"undefined"!=jQuery.type((currState.data||{}).content)){if(currState.data.updatedAt){var updatedInterval=(new Date).getTime()-currState.data.updatedAt;if(1e3>=updatedInterval)return}try{jQuery(currState.data.container).html(currState.data.content)}catch(e){alert(e)}bg.history.applyState(currState)}})}),void 0)},Go:function(url,target){jQuery.ajax({url:url,cache:!1,type:"GET",dataType:"html",complete:function(jqXHR){if(target="#"+target,jQuery(target).html().length>0)bg.history.snapshot(),History.pushState({content:jqXHR.responseText,container:target},"",url);else{var state=History.getState();History.replaceState({content:jqXHR.responseText,container:target,updatedAt:(new Date).getTime()},state.title,state.url);try{jQuery(target).html(jqXHR.responseText)}catch(e){alert(e)}}beangle.hideAjaxMessage()},beforeSend:beangle.displayAjaxMessage})},snapshot:function(){var state=History.getState();if(state.data.content){var _t=[];jQuery(state.data.container+" .box:checked").each(function(index,e){_t[_t.length]=e.value}),state.data.boxes=_t,state.updatedAt=(new Date).getTime(),_t.length>0&&History.replaceState(state.data,state.title,state.url)}},applyState:function(state){state.data.boxes&&jQuery(state.data.boxes).each(function(index,value){jQuery(state.data.container+" .box[value="+value+"]").attr("checked","checked")})},submit:function(form,action,target){function showResult(result){return bg.history.snapshot(),History.pushState({content:result,container:target},"",action),bg.hideAjaxMessage(),!1}function showError(response){var responseText=response.responseText;try{jQuery(target).html(responseText)}catch(e){alert(e)}return bg.hideAjaxMessage(),!1}"string"==jQuery.type(form)&&0!=form.indexOf("#")&&(form="#"+form),"string"==jQuery.type(target)&&0!=target.indexOf("#")&&(target="#"+target),bg.require("jquery.form"),bg.displayAjaxMessage(),jQuery(form).ajaxForm({success:showResult,error:showError})}},beangle.extend({Go:function(obj,target){var url=obj;return"object"==typeof obj&&"a"==obj.tagName.toLowerCase()&&(url=obj.href,target||(target=bg.findTarget(obj))),target||(target="_self"),"_self"==target?self.location=url:"_parent"==target?self.parent.location=url:"_top"==target?self.top.location=url:"_new"==target||"_blank"==target?window.open(url):bg.isAjaxTarget(target)?beangle.ajaxhistory?beangle.history.Go(url,target):jQuery("#"+target).load(url,{}):document.getElementById(target).src=url,!1},getContextPath:function(){return self.location.pathname.substring(0,self.location.pathname.substring(1).indexOf("/")+1)},ready:function(fn){jQuery(document).ready(fn)},isAjaxTarget:function(target){return target?""==target||"_new"==target||"_blank"==target||"_self"==target||"_parent"==target||"_top"==target?!1:(targetEle=document.getElementById(target))?(tagName=targetEle.tagName.toLowerCase(),"iframe"==tagName||"object"==tagName?!1:!0):!1:!1},normalTarget:function(target){if(""==target||"new"==target||"_blank"==target||"_self"==target||"_parent"==target)return target;var targetObj=document.getElementById(target);return targetObj&&"iframe"==targetObj.tagName.toLowerCase()?target:"_self"},findTarget:function(ele){for(var p=ele.parentNode,finalTarget="_self";p;){if(p.id&&p.className&&p.className.indexOf("ajax_container")>-1){finalTarget=p.id;break}p=p==p.parentNode?null:p.parentNode}return ele.target=finalTarget,finalTarget}}),beangle.extend({assert:{notNull:function(object,message){null==object&&alert(message)}}}),bg.extend({randomInt:function(){var num=1e7*Math.random();return num-=num%1}}),beangle.extend({logger:{level:1,debug:function(message){if(beangle.logger.level<=0){var msg="[beangle] "+message;window.console&&window.console.log?window.console.log(message):window.opera&&window.opera.postError?window.opera.postError(msg):alert(msg)}}}}),beangle.extend({event:{portable:function(e){return e?e:window.event},getTarget:function(e){return e=bg.event.portable(e),e.target||e.srcElement}}}),beangle.extend({input:{toggleCheckBox:function(chk,event){bg.input.boxAction(chk,"toggle",event)},getRadioValue:function(radioName){return bg.input.boxAction(document.getElementsByName(radioName),"value")},getCheckBoxValues:function(chkname){var tmpIds=bg.input.boxAction(document.getElementsByName(chkname),"value");return null==tmpIds?"":tmpIds},boxAction:function(box,action,event){var srcElement,i,val="";if(box)if(box[0])for(i=0;i<box.length;i++)if("selected"==action){if(box[i].checked)return box[i].checked}else"value"==action?box[i].checked&&("radio"==box[i].type?val=box[i].value:"checkbox"==box[i].type&&(""!=val&&(val+=","),val+=box[i].value)):"toggle"==action&&(srcElement=beangle.event.getTarget(event),box[i].checked=srcElement.checked,"function"==typeof box[i].onchange&&box[i].onchange());else{if("selected"==action)return box.checked;"value"==action?box.checked&&(val=box.value):"toggle"==action&&(srcElement=beangle.event.getTarget(event),box.checked=srcElement.checked,"function"==typeof box.onchange&&box.onchange())}return"selected"==action?!1:val}}}),beangle.extend({iframe:{adaptSelf:function(){bg.iframe.adapt(self)},adapt:function(targObj,extraHight){var frames,targWin,totalHeight,myHeight;null!=targObj&&""!=targObj.name&&targObj.parent!=targObj&&(targObj.parent!=window.top||"hidden"!=targObj.parent.document.body.style.overflowY)&&(frames=targObj.parent.document.getElementsByName(targObj.name),frames.length<1||(targWin=frames[0],null==targWin||"no"!=targWin.scrolling&&"autoadapt"!=targWin.className||(totalHeight=targObj.document.body.scrollHeight+(null==extraHight?0:extraHight),myHeight=0,targWin.style.height&&(myHeight=parseInt(targWin.style.height.substring(0,targWin.style.height.length-2))),totalHeight>0&&totalHeight>myHeight&&(targWin.style.height=totalHeight+"px",bg.logger.debug("adapt frame:"+targObj.name+" height "+targWin.style.height))),bg.iframe.adapt(targObj.parent)))}}}),beangle.extend({form:{submit:function(myForm,action,target,onsubmit,ajax,noHistory){var submitTarget,rs,sumbitBtnId,submitx,origin_target,origin_action,options_submit;if("string"==typeof myForm&&(myForm=document.getElementById(myForm)),myForm.onsubmit){rs=null;try{rs=myForm.onsubmit()}catch(e){return alert(e),void 0}if(!rs)return}if(onsubmit){if(rs=null,"function"==typeof onsubmit)try{rs=onsubmit(myForm)}catch(e){return alert(e),void 0}else rs=eval(onsubmit);if(!rs)return}submitTarget=null!=target?target:myForm.target,submitTarget||(submitTarget=bg.findTarget(myForm)),null==action&&(action=myForm.action),0==action.indexOf("http://")&&(action=action.substring(action.indexOf("/",7))),(null==ajax||ajax)&&(ajax=bg.isAjaxTarget(submitTarget)),origin_target=myForm.target,origin_action=myForm.action,myForm.action=action,ajax?((null==myForm.id||""==myForm.id)&&myForm.setAttribute("id",myForm.name),sumbitBtnId=myForm.id+"_submit",submitx=document.getElementById(sumbitBtnId),null==submitx&&(submitx=document.createElement("input"),submitx.setAttribute("id",sumbitBtnId),submitx.setAttribute("type","submit"),submitx.style.display="none",myForm.appendChild(submitx)),options_submit={id:sumbitBtnId,jqueryaction:"button",targets:submitTarget,href:"#"},origin_onsubmit=myForm.onsubmit,"undefined"!=typeof jQuery&&(!noHistory&&0==jQuery("input:file",myForm).length&&beangle.ajaxhistory?(beangle.history.submit(myForm.id,action,submitTarget),myForm.onsubmit=null):jQuery.struts2_jquery.bind(jQuery("#"+sumbitBtnId),options_submit)),submitx.click(),myForm.onsubmit=origin_onsubmit,jQuery("#"+sumbitBtnId).unbind()):(myForm.target=bg.normalTarget(submitTarget),myForm.submit(),myForm.target=origin_target),myForm&&(myForm.action=origin_action)},submitId:function(form,id,isMulti,action,promptMsg,ajax){var selectId=bg.input.getCheckBoxValues(id);return null==isMulti&&(isMulti=!1),""==selectId?(alert(isMulti?"请选择一个或多个进行操作":"请选择一个进行操作"),void 0):!isMulti&&selectId.indexOf(",")>0?(alert("请仅选择一个"),void 0):(null!=action?form.action=action:action=form.action,bg.form.addInput(form,isMulti?id+"s":id,selectId,"hidden"),(null==promptMsg||confirm(promptMsg))&&bg.form.submit(form,action,null,null,ajax),void 0)},addInput:function(form,name,value,type){if(null!=form[name]&&"undefined"!=typeof form[name].tagName)form[name].value=value;else{null==type&&(type="hidden");var input=document.createElement("input");input.setAttribute("name",name),input.setAttribute("value",value),input.setAttribute("type",type),form.appendChild(input)}},ecodeParams:function(params){if(""==params)return"";var i,eqIndex,paramsPair=params.split("&"),newParams="";for(i=0;i<paramsPair.length;i++)""!=paramsPair[i]&&(eqIndex=paramsPair[i].indexOf("="),newParams+="&"+paramsPair[i].substr(0,eqIndex),-1!=eqIndex&&(newParams+="=",newParams+=escape(paramsPair[i].substr(eqIndex+1))));return newParams},setSearchParams:function(from,to,prefix){bg.form.addInput(to,"params","");var params=bg.form.getInputParams(from,prefix,!1);bg.form.addInput(to,"params",params)},addHiddens:function(form,paramSeq){bg.assert.notNull(paramSeq,"paramSeq for addHiddens must not be null");var i,name,value,params=paramSeq.split("&");for(i=0;i<params.length;i++)""!=params[i]&&(name=params[i].substr(0,params[i].indexOf("=")),value=params[i].substr(params[i].indexOf("=")+1),bg.form.addInput(form,name,value,"hidden"))},addParamsInput:function(form,value){bg.form.addInput(form,"params",value,"hidden")},transferParams:function(from,to,prefix,getEmpty){null==getEmpty&&(getEmpty=!0);var params=bg.form.getInputParams(from,prefix,getEmpty);bg.form.addHiddens(to,params)},getInputParams:function(form,prefix,getEmpty){var i,elems=form.elements,params="";for(null==getEmpty&&(getEmpty=!0),i=0;i<elems.length;i++)if(""!=elems[i].name){if("params"==elems[i].name)continue;if(""==elems[i].value&&!getEmpty)continue;if(null!=prefix){if(0==elems[i].name.indexOf(prefix)&&elems[i].name.indexOf(".")>1){if(("radio"==elems[i].type||"checkbox"==elems[i].type)&&!elems[i].checked)continue;params+=-1!=elems[i].value.indexOf("&")?"&"+elems[i].name+"="+escape(elems[i].value):"&"+elems[i].name+"="+elems[i].value}}else{if(("radio"==elems[i].type||"checkbox"==elems[i].type)&&!elems[i].checked)continue;params+=-1!=elems[i].value.indexOf("&")?"&"+elems[i].name+"="+escape(elems[i].value):"&"+elems[i].name+"="+elems[i].value}}return params},goToPage:function(form,pageNo,pageSize,orderBy){if("object"!=typeof form)return alert("[goToPage:]form is not well defined."),void 0;if(null!=pageNo){if(!/^[1-9]\d*$/.test(pageNo))return alert("输入分页的页码是:"+pageNo+",它不是个整数"),void 0;bg.form.addInput(form,"pageNo",pageNo,"hidden")}else bg.form.addInput(form,"pageNo",1,"hidden");if(null!=pageSize){if(!/^[1-9]\d*$/.test(pageSize))return alert("输入分页的页长是:"+pageSize+",它不是个整数"),void 0;bg.form.addInput(form,"pageSize",pageSize,"hidden")}else bg.form.addInput(form,"pageSize","","hidden");null!=orderBy&&"null"!=orderBy?bg.form.addInput(form,"orderBy",orderBy,"hidden"):bg.form.addInput(form,"orderBy","","hidden"),form.submit()},goToFirstPage:function(form){bg.form.goToPage(form,1)}}}),beangle.extend({select:{getValues:function(select){var i,val="",options=select.options;for(i=0;i<options.length;i++)""!=val&&(val+=","),val+=options[i].value;return val},getSelectedValues:function(select){var i,val="",options=select.options;for(i=0;i<options.length;i++)options[i].selected&&(""!=val&&(val+=","),val+=options[i].value);return val},hasOption:function(select,op){for(var i=0;i<select.length;i++)if(select.options[i].value==op.value)return!0;return!1},moveSelected:function(srcSelect,destSelect){var i,op;for(i=0;i<srcSelect.length;i++)srcSelect.options[i].selected&&(op=srcSelect.options[i],bg.select.hasOption(destSelect,op)||(destSelect.options[destSelect.length]=new Option(op.text,op.value)));bg.select.removeSelected(srcSelect),bg.select.clearStatus(srcSelect)},clearStatus:function(select){for(var i=0;i<select.options.length;i++)select.options[i].selected=!1},selectAll:function(select){for(var i=0;i<select.options.length;i++)select.options[i].selected=!0;return select.options.length>0},removeSelected:function(select){var i,options=select.options;for(i=options.length-1;i>=0;i--)options[i].selected&&(options[i]=null)},setSelected:function(select,idSeq){0!=idSeq.indexOf(",")&&(idSeq=","+idSeq),idSeq.lastIndexOf(",")!=idSeq.length-1&&(idSeq+=",");for(var i=0;i<select.options.length;i++)-1!=idSeq.indexOf(","+select.options[i].value+",")&&(select.options[i].selected=!0)}}}),beangle.extend({cookie:{get:function(cookieName){var end,cookieString=document.cookie,start=cookieString.indexOf(cookieName+"=");return-1==start?null:(start+=cookieName.length+1,end=cookieString.indexOf(";",start),-1==end?unescape(cookieString.substring(start)):unescape(cookieString.substring(start,end)))},set:function(name,value,path){null==path&&(path="/");var expires=new Date;expires.setTime(expires.getTime()+2592e3),document.cookie=name+"="+value+"; expires="+expires.toGMTString()+"; path="+path}}}),bg.extend({page:function(action,target){return new Page(action,target)}}),bg.onReturn=function(event,action){event||(event=window.event),event&&event.keyCode&&13==event.keyCode&&action()},bg.extend({require:function(module,callback){var base=bg.getContextPath();"jquery.form"==module&&jQuery.struts2_jquery.require("/static/scripts/jquery/jquery-form-3.38.0.js",callback,base)}}),beangle.ready(beangle.iframe.adaptSelf),beangle.ajaxhistory&&beangle.history.init()}}(window);