function toggleRows(elm){var fireColumn=getFireColumnIndex(elm),fireCell=getFireCell(elm),rows=fireCell.parentNode.parentNode.getElementsByTagName("TR"),thisID=fireCell.parentNode.id+treeIdComma,newDisplay="none";"tree-folder"==elm.className?(newDisplay=document.all?"block":"table-row",elm.className="tree-folder-open"):elm.className="tree-folder";for(var matchDirectChildrenOnly="none"!=newDisplay,j=0;j<rows.length;j++){var s=rows[j];if(matchStart(s.id,thisID,matchDirectChildrenOnly)){s.style.display=newDisplay;var cell=s.getElementsByTagName("td")[fireColumn],tier=cell.getElementsByTagName("div")[0],folder=tier.getElementsByTagName("a")[0];null!=folder.getAttribute("onclick")&&(folder.className="tree-folder")}}}function matchStart(target,pattern,matchDirectChildrenOnly){var pos=target.indexOf(pattern);return 0!=pos?!1:matchDirectChildrenOnly?target.slice(pos+pattern.length,target.length).indexOf(treeIdComma)>=0?!1:!0:!0}function collapseAllRows(){for(var rows=document.getElementsByTagName("tr"),j=0;j<rows.length;j++){var r=rows[j];r.id.indexOf(treeIdComma)>1&&(r.style.display="none")}}function countchar(id){for(var cnt=0,i=0;i<id.length;i++)id.charAt(i)==treeIdComma&&cnt++;return cnt+1}function collapseAllRowsFor(depth){for(var rows=document.getElementsByTagName("tr"),j=0;j<rows.length;j++){var r=rows[j];if(countchar(r.id)>depth&&(r.style.display="none"),countchar(r.id)>=depth){var rowFolder=document.getElementById(r.id+"_folder");rowFolder&&(rowFolder.className="tree-folder")}}}function displayAllRowsFor(depth){for(var rows=document.getElementsByTagName("tr"),j=0;j<rows.length;j++){var r=rows[j];if(countchar(r.id)>depth&&(r.style.display=""),countchar(r.id)>=depth){var rowFolder=document.getElementById(r.id+"_folder");rowFolder&&(rowFolder.className="tree-folder-open")}}}function treeToggle(elm,callback,toggleParent){var rows=document.getElementsByTagName("tr"),thisID=elm.parentNode.parentNode.id,checked=elm.checked;null==toggleParent&&(toggleParent=!0),fireColumn=getFireColumnIndex(elm);for(var i=0;i<rows.length;i++){var r=rows[i];if(""!=r.id&&(0==r.id.indexOf(thisID)||0==thisID.indexOf(r.id))){var cell=r.getElementsByTagName("td")[fireColumn],input=cell.getElementsByTagName("input")[0];if(input.disabled)continue;var fireCallback=!1;0==thisID.indexOf(r.id)?(checked&&toggleParent&&(input.checked=!0),thisID==r.id&&(fireCallback=!0)):(input.checked=checked,fireCallback=!0),fireCallback&&callback&&callback(input)}}}function getFireCell(ele){for(var p=ele;p&&"td"!=p.tagName.toLowerCase();)p=p==p.parentNode?null:p.parentNode;return p||alert("cannot find fired cell"),p}function getFireColumnIndex(elm){var cell=getFireCell(elm),rowTds=cell.parentNode.getElementsByTagName("td"),fireColumn=0;for(j=0;j<rowTds.length;j++)rowTds[j]==cell&&(fireColumn=j);return fireColumn}function treeToggleAll(elm,callback){var fireColumn=getFireColumnIndex(elm),rows=document.getElementsByTagName("tr");elm.parentNode.parentNode.id;for(var checked=elm.checked,i=0;i<rows.length;i++){var r=rows[i];if(r.id){var cell=r.getElementsByTagName("td")[fireColumn],inputs=cell.getElementsByTagName("input");if(1==inputs.length){var input=cell.getElementsByTagName("input")[0];input.disabled||(input.checked=checked,callback&&callback(input))}}}}var treeIdComma=".";