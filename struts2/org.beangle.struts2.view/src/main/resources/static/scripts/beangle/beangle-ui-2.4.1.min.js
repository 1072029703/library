(function(d){function l(a,d){this.name=a;this.func=d}function r(a,e,c){function f(b,a){return a.charAt(0)=="/"?a:b+a}function j(b){if(null==b)return n;if(typeof b=="object")b=b.name;return typeof b=="string"?b.indexOf("add")!=-1||b.indexOf("new")!=-1?"new.png":b.indexOf("remove")!=-1||b.indexOf("delete")!=-1?"edit-delete.png":b.indexOf("update")!=-1||b.indexOf("edit")!=-1||b.indexOf("Edit")!=-1?"update.png":b.indexOf("export")!=-1?"excel.png":b.indexOf("copy")!=-1?"edit-copy.png":b.indexOf("print")!=
-1?"print.png":b.indexOf("refresh")!=-1?"refresh.png":b.indexOf("close")!=-1?"close.png":b.indexOf("save")!=-1?"save.png":b.indexOf("download")!=-1?"download.png":n:n}function g(b,a){if(null==a)d.alert("action should not be null");else if(typeof a=="function")b.onclick=a;else{if(typeof a=="string")a.indexOf("(")!=-1?b.onclick=function(){eval(a)}:a.indexOf(".action")!=-1?b.onclick=function(){Go(a)}:d.alert("unsuported action description:"+a);if(typeof a=="object")b.onclick=a.func}}function h(b){for(b=
d.event.getTarget(b);b&&b.tagName.toLowerCase()!="div";)b=b.parentNode;var a=b.lastElementChild||b.lastChild;null==a?alert("menu is null then return and target is "+b):a.style.visibility!=""&&a.style.visibility!="hidden"?(a.style.visibility="hidden",b.className="toolbar-item-transfer"):(a.style.visibility="visible",b.className="toolbar-item-selected")}function m(b,a){var d=document.createElement("table");d.className="toolbar-menu";d.id=b+"Table";var c=document.createElement("tbody");d.appendChild(c);
if(jQuery("#"+b).find("span").length>0)d.onclick=function(b){h(b)};a.appendChild(d);this.table=d;this.addItem=function(b,a,d,h){var c=document.createElement("td");null==d&&(d=j(a));if(h==""||h==null)h=b;c.innerHTML='<img class="toolbar-icon" src="'+f(p,d)+'" alt="'+h+'" />'+b;c.onmouseout=i;c.onmouseover=k;g(c,a);c.className="toolbar-menuitem";c.width="100%";b=document.createElement("tr");b.appendChild(c);this.table.tBodies.length==0&&this.table.appendChild(document.createElement("tbody"));this.table.tBodies[0].appendChild(b)}}
function i(b){for(b=d.event.getTarget(b);b&&b.tagName.toLowerCase()!="td";)b=b.parentNode;if(b)b.className="toolbar-menuitem"}function k(b){for(b=d.event.getTarget(b);b&&b.tagName.toLowerCase()!="td";)b=b.parentNode;if(b)b.className="toolbar-menuitem-transfer"}function o(b){for(b=d.event.getTarget(b);b&&b.tagName.toLowerCase()!="div";)b=b.parentNode;if(b)b.className="toolbar-item-transfer"}function q(b){for(b=d.event.getTarget(b);b&&b.tagName.toLowerCase()!="div";)b=b.parentNode;if(b)b.className=
"toolbar-item"}this.itemCount=0;this.bar=document.getElementById(a);if(null!=this.bar){this.id=a;this.separator="|";this.bar.className="toolbar notprint";var n="action.png",l=self.location.pathname.substring(0,self.location.pathname.substring(1).indexOf("/")+1)+"/static/themes/"+d.uitheme+"/icons/",p=l+"16x16/actions/";this.setTitle=function(b,a){if(b)a==null&&(a="info.png"),this.title_div.innerHTML='<img class="toolbar-icon" src="'+f(p,a)+'" /><strong>'+b+"</strong>"};this.setSeparator=function(b){this.separator=
b};this.init=function(b){var a=document.createElement("div");a.className="toolbar-title";this.bar.appendChild(a);this.title_div=a;this.setTitle(b);b=document.createElement("div");b.className="toolbar-msg";b.id=this.id+"_msg";this.bar.appendChild(b);b=document.createElement("div");b.className="toolbar-items";b.id=this.id+"_items";this.items_div=b;this.bar.appendChild(b)};this.init(e,c);this.addHr=function(){hrdiv=this.appendDiv(null,"toolbar-line");hrdiv.innerHTML='<img height="1" width="100%" align="top" src="'+
p+'keyline.png" />'};this.addBack=function(b){null==b?this.addItem("\u8fd4\u56de",function(){history.back(-1)},"backward.png"):this.addItem(b,function(){history.back(-1)},"backward.png")};this.addHelp=function(b){this.addItem("\u5e2e\u52a9",function(){null==b?d.alert("\u65bd\u5de5\u4e2d.."):window.open("help.action?helpId="+b)},"help-contents.png")};this.addPrint=function(b){null==b?this.addItem("\u6253\u5370","print()"):this.addItem(b,"print()")};this.addClose=function(b){if(""==b||null==b)b="\u5173\u95ed";
this.addItem(b,"window.close()","close.png")};this.addItem=function(b,a,d,c){this.addSeparatorAsNeed();var h=document.createElement("div");null==d&&(d=j(a));if(c==""||c==null)c=b;h.innerHTML='<img class="toolbar-icon" src="'+f(p,d)+'" alt="'+c+'" />'+b;h.onmouseout=q;h.onmouseover=o;g(h,a);h.className="toolbar-item";h.title=c;this.items_div.appendChild(h);this.itemCount++;return h};this.addDiv=function(b){var a=document.createElement("div");if(b)a.className=b;this.items_div.appendChild(a);return a};
this.appendDiv=function(b,a){var g=document.createElement("div");b&&g.setAttribute("id",b);if(a)g.className=a;document.getElementById(this.id).appendChild(g);return g};this.addSeparator=function(){if(this.separator)this.addDiv("toolbar-separator").innerHTML=this.separator};this.addSeparatorAsNeed=function(){this.itemCount!=0&&this.addSeparator()};this.addBackOrClose=function(b,a){parent.location==self.location&&(window.history.length<=1||window.history.length==null)?this.addClose(null==a?"\u5173\u95ed":
a):this.addBack(null==b?"\u540e\u9000":b)};this.addBlankItem=function(){this.addDiv("toolbar-group-separator").innerHTML="&nbsp;";this.itemCount++};this.setMessage=function(b){if(typeof b!="undefined")document.getElementById(this.id+"_msg").innerHTML=b};this.addMenu=function(b,a,c,i){this.addSeparatorAsNeed();var e=document.createElement("div");null==c&&(c=j(a));i=i||b;e.className="toolbar-item";var k=this.id+this.itemCount+"_menu";e.id=k;e.tabIndex=0;e.onmouseout=q;e.onmouseover=o;this.items_div.appendChild(e);
if(a==null)e.innerHTML='<img class="toolbar-icon" src="'+f(p,c)+'" alt="'+i+'" />'+b+'&nbsp;<img src="'+l+'8x8/actions/downarrow.png" class="toolbar-icon" />',e.onclick=function(a){h(a)};else{var n=document.createElement("span");n.innerHTML='<img class="toolbar-icon" src="'+f(p,c)+'" alt="'+i+'" />'+b;g(n,a);b=document.createElement("span");b.innerHTML='&nbsp;<img src="'+l+'8x8/actions/downarrow.png" class="toolbar-icon" />';b.onclick=function(a){h(a)};e.appendChild(n);e.appendChild(b)}e.onblur=function(a){a:{for(var b=
d.event.getTarget(a);b&&b.tagName.toLowerCase()!="div";)b=b.parentNode;a=b.lastElementChild||b.lastChild;if(null==a||a.tagName.toLowerCase()!="table")alert("menu is null then return and target is "+b);else if(a.style.visibility!=""&&a.style.visibility!="hidden"){for(b=0;b<a.rows.length;b++)if(a.rows[b].cells[0].className=="toolbar-menuitem-transfer")break a;a.style.visibility="hidden"}}};e=new m(k,e);this.itemCount++;return e}}}d.alert=function(a){alert(a)};d.uitheme="default";d.extend({"ui.toolbar":function(a,
d,c){return new r(a,d,c)}});d.extend({"ui.gridbar":function(a,e){function c(a,g,c,d,e){for(var f=[],o=0;o<e.length;o++)f[o]=e[o].addMenu(a,g,c,d);this.addItem=function(a,g,c,d){for(var b=0;b<f.length;b++)f[b].addItem(a,g,c,d)}}this.divIds=a;this.pageId=null;this.title=e;this.toolbars=[];for(var f=0;f<a.length;f++)this.toolbars[f]=d.ui.toolbar(a[f],e),this.toolbars[f].setSeparator(""),document.getElementById(a[f]).className="gridbar",document.getElementById(a[f]+"_items").className="gridbar-items";
this.pageId=function(a){this.pageId=a;return this};this.addItem=function(a,g,c,d){for(var e=0;e<this.toolbars.length;e++)this.toolbars[e].addItem(a,g,c,d)};this.addBack=function(a){for(var g=0;g<this.toolbars.length;g++)this.toolbars[g].addBack(a)};this.addBackOrClose=function(){for(var a=0;a<this.toolbars.length;a++)this.toolbars[a].addBackOrClose()};this.addBlankItem=function(a,g,c,d){for(var e=0;e<this.toolbars.length;e++)this.toolbars[e].addBlankItem(a,g,c,d)};this.addPage=function(c,g,e){this.myPage=
c;for(var f=0;f<this.toolbars.length;f++)pageDiv=this.toolbars[f].appendDiv(a[f]+"_page","girdbar-pgbar"),d.ui.pagebar(c,pageDiv,g,e);return this};this.addEntityAction=function(a,c){return new d.entityaction(a,c)};this.addPrint=function(a){for(var c=0;c<this.toolbars.length;c++)this.toolbars[c].addPrint(a)};this.addMenu=function(a,d,e,f){return new c(a,d,e,f,this.toolbars)}}});d.extend({"ui.pagebar":function(a,d,c,f){if(a.total!=0){c?c.length==0&&(c=[a.pageSize]):c=[10,20,30,50,70,100,200,500,1E3];
f||(f={first:"\u00ab First",previous:"\u2039 Previous",next:"Next \u203a",last:"Last \u00bb",no:"No:",size:"Size:",change:"Click me to change page size",pagesize:"Page Size"});var j=a.maxPageNo;addAnchor=function(c,g){var f=document.createElement("a");f.setAttribute("href","#");f.innerHTML=c;f.style.padding="0px 2px 0px 2px";d.appendChild(f);jQuery(f).click(function(){a.goPage(g)})};a.pageNo>1&&(addAnchor(f.first,1),addAnchor(f.previous,a.pageNo-1));var g=document.createElement("span");g.innerHTML=
"<strong>"+a.startNo+"</strong> - <strong>"+a.endNo+"</strong> of <strong>"+a.total+"</strong>";g.style.padding="0px 2px 0px 2px";d.appendChild(g);g=jQuery(g);g.attr("title",f.change);g.mouseover(function(){this.className="pgbar-label"});g.mouseout(function(){this.className=""});g.click(function(){this.parentNode.style.marginTop="0px";this.nextSibling.style.display="";this.style.display="none"});g=document.createElement("span");g.style.display="none";var h=document.createElement("input");g.innerHTML=
f.no;h.className="pgbar-input";g.appendChild(h);h=jQuery(h);h.attr("value",a.pageNo+"/"+j);h.attr("id",d.id+"_input");h.focus(function(){this.value=""});h.blur(function(){if(!this.value)this.value=a.pageNo+"/"+j});if(c&&c.length>0){h=document.createElement("select");h.id=d.id+"_select";g.appendChild(h);h.className="pgbar-selbox";h.title=f.pagesize||"Page Size";for(var m=0,i=0;i<c.length;i++)c[i]==a.pageSize&&(m=i),h.options.add(new Option(c[i],c[i]));h.selectedIndex=m}c=document.createElement("input");
c.setAttribute("type","button");c.setAttribute("name","gogo");c.value="Go";c.className="pgbar-go";g.appendChild(c);var k=function(){var c=document.getElementById(d.id+"_input").value,g=c.indexOf("/"+a.maxPageNo);-1!=g&&(c=c.substring(0,g));a.goPage(c,document.getElementById(d.id+"_select").value)};jQuery(c).click(function(){k()});d.appendChild(g);jQuery(g).keypress(function(a){if(!a)a=window.event;if(a&&a.keyCode&&a.keyCode==13)return k(),!1});a.pageNo<a.maxPageNo&&(addAnchor(f.next,a.pageNo+1),addAnchor(f.last,
a.maxPageNo))}}});d.extend({"ui.grid":{overSortTableHeader:function(){this.style.color="white";this.style.backgroundColor="green"},outSortTableHeader:function(){this.style.borderColor="";this.style.color="";this.style.backgroundColor=""},mouseOverGrid:function(){if(typeof this.className!="undefined"){var a=this.className;selectIndex=a.indexOf("griddata-selected");if(-1==selectIndex)overIndex=a.indexOf("griddata-over"),this.className=-1==overIndex?a+" griddata-over":a.substring(0,overIndex)}},onRowChange:function(a){var a=
d.event.getTarget(a),e=!0;if(null!=a&&a.tagName.toLowerCase()=="td"){for(a=a.parentNode.firstChild;a.tagName==null||a.tagName.toLowerCase()!="td";)a=a.nextSibling;for(a=a.firstChild;typeof a.tagName=="undefined"||a.tagName.toLowerCase()!="input";)if(a=a.nextSibling,a==null)return;a.checked=!a.checked}else a.type=="checkbox"||a.type=="radio"||(e=!1);if(null!=a&&e){if(typeof a.onchange=="function")a.onchange();if(a.type!="radio"&&(e=a.parentNode.parentNode,typeof e.className!="undefined")){var c=e.className.indexOf("griddata-selected");
if(a.checked)-1==c&&(e.className+=" griddata-selected");else if(-1!=c)e.className=e.className.substring(0,c)}}},sort:function(a,e){if(null==a)d.alert("\u65e0\u6cd5\u627e\u5230\u5143\u7d20\u5bf9\u5e94\u7684\u6392\u5e8f\u8868\u683c\uff01");else{var c=null,c=e.className=="gridhead-sortable"?typeof e.asc!="undefined"?e.asc:e.id+" asc":e.className=="gridhead-asc"?typeof e.desc!="undefined"?e.desc:e.id.replace(/\,/g," desc,")+" desc":"";a.goPage(1,null,c)}},init:function(a,e){var c=document.getElementById(a).tHead,
f,j,g,h,m,i,k;if(c&&c.rows.length!=0){f=e.orderby;j=function(){d.ui.grid.sort(e,this)};for(h=0;h<c.rows.length;h++){m=c.rows[h];for(g=0;g<m.cells.length;g++)if(i=m.cells[g],i.className=="gridhead-sortable"&&null!=i.id){i.onclick=j;i.onmouseover=d.ui.grid.overSortTableHeader;i.onmouseout=d.ui.grid.outSortTableHeader;i.title="\u70b9\u51fb\u6309 ["+i.innerHTML+"] \u6392\u5e8f";k=i.id.replace(/\,/g," desc,")+" desc";if(typeof i.desc!="undefined")k=i.desc;if(f.indexOf(k)!=-1)i.className="gridhead-desc",
i.innerHTML=i.innerHTML+'<img src="'+d.getContextPath()+"/static/themes/"+d.uitheme+'/icons/16x16/actions/sort-desc.png"  style="border:0"  alt="Arrow" />';else{k=i.id+" asc";if(typeof i.asc!="undefined")k=i.asc;if(f==k)i.className="gridhead-asc",i.innerHTML=i.innerHTML+'<img src="'+d.getContextPath()+"/static/themes/"+d.uitheme+'/icons/16x16/actions/sort-asc.png"  style="border:0"  alt="Arrow" />'}}}if(c=document.getElementById(a+"_data"))for(h=0;h<c.rows.length;h++)f=c.rows[h],j=(j=f.className)?
" "+j:"",f.className=h%2==1?"griddata-odd"+j:"griddata-even"+j,f.onclick=d.ui.grid.onRowChange,f.onmouseover=d.ui.grid.mouseOverGrid,f.onmouseout=d.ui.grid.mouseOverGrid}},fillEmpty:function(a,d,c,f){a=document.getElementById(a);d-=c;d>7&&(d=7);d*=16;if(c==0)c=document.createElement("div"),c.innerHTML=f||"No result matched your search.",c.style.paddingTop=d/2-16+"px",a.appendChild(c);a.style.height=d+"px"}}});d.extend({entityaction:function(a,e){function c(a,c){var d=a.lastIndexOf("!"),f=a.lastIndexOf("."),
e=a,j="";-1==d&&(d=f);-1!=d&&(e=a.substring(0,d));-1!=f&&(j=a.substring(f));return e+"!"+c+j}this.entity=a;this.page=e;this.formid="form_"+d.randomInt();var f=this;this.getForm=function(){return this.page.getForm()};this.addParam=function(a,c){d.form.addInput(this.getForm(),a,c)};if(null!=this.page.target&&""!=this.page.target){var j=this.getForm();if(null!=j)j.target=this.page.target}this.beforeSubmmitId=function(f){var e=d.input.getCheckBoxValues(a+".id");if(e==null||e=="")return d.alert("\u4f60\u6ca1\u6709\u9009\u62e9\u8981\u64cd\u4f5c\u7684\u8bb0\u5f55\uff01"),
!1;e=this.getForm();e.action=c(this.page.actionurl,f);this.page.paramstr&&(d.form.addHiddens(e,this.page.paramstr),d.form.addParamsInput(e,this.page.paramstr));return!0};this.submitIdAction=function(a,c,f,e){this.beforeSubmmitId(a)&&(!(null!=f&&""!=f)||confirm(f))&&d.form.submitId(this.getForm(),this.entity+".id",c,null,null,e)};this.remove=function(a){a=a||"\u786e\u8ba4\u5220\u9664?";return new l("remove",function(){f.submitIdAction("remove",!0,a)})};this.add=function(){return new l("add",function(){var a=
f.getForm();""!=f.page.paramstr&&d.form.addHiddens(a,f.page.paramstr);d.form.addInput(a,f.entity+".id","");""!=f.page.paramstr&&d.form.addParamsInput(a,f.page.paramstr);d.form.submit(a,c(f.page.actionurl,"edit"))})};this.info=function(){return new l("info",function(){f.submitIdAction("info",!1)})};this.edit=function(){return new l("edit",function(){f.submitIdAction("edit",!1)})};this.single=function(a,c,e){return new l(a,function(){var i=f.getForm();null!=e&&d.form.addHiddens(i,e);f.submitIdAction(a,
!1,c)})};this.multi=function(a,c,e,i){return new l(a,function(){try{var k=f.getForm();null!=e&&d.form.addHiddens(k,e);f.submitIdAction(a,!0,c,i)}catch(j){d.alert(j)}})};this.method=function(a,e,j,i){return new l(a,function(){var k=f.getForm();if(!(null!=e&&""!=e)||confirm(e))null!=j&&d.form.addHiddens(k,j),""!=f.page.paramstr&&(d.form.addHiddens(k,f.page.paramstr),d.form.addParamsInput(k,f.page.paramstr)),d.form.submit(k,c(f.page.actionurl,a),null,null,i)})};this.exportData=function(a,c,d){return f.method("export",
null,"&format="+(c||"xls")+"&properties="+(a||"")+(d||""),!1)}}});d.extend({"ui.module":{moduleClick:function(a){a=document.getElementById(a);a.className=a.className=="module collapsed"?"module expanded":"module collapsed"}}});d.extend({"ui.load":function(a,e){var c=d.getContextPath();a=="validity"?(jQuery.struts2_jquery.requireCss("/static/themes/"+d.uitheme+"/jquery.validity.css",c),jQuery.struts2_jquery.require("/static/scripts/jquery.validity-1.1.1.js",null,c),jQuery.struts2_jquery.scriptCache["/static/scripts/i18n/zh_CN/jquery.validity.js"]&&
e?e():jQuery.struts2_jquery.require("/static/scripts/i18n/zh_CN/jquery.validity.js",e,c)):a=="tabletree"?(jQuery.struts2_jquery.requireCss("/static/themes/"+d.uitheme+"/beangle-ui-tabletree.css",c),jQuery.struts2_jquery.require("/static/scripts/beangle/beangle-ui-tabletree.js",e,c)):a=="colorbox"&&(jQuery.struts2_jquery.requireCss("/static/themes/"+d.uitheme+"/colorbox.css",c),jQuery.struts2_jquery.require("/static/scripts/colorbox/jquery-colorbox-1.3.17.1.min.js",e,c))}})})(beangle);
