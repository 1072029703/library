(function(f){function n(a,b,c){this.name=a;this.func=b;this.objectCount=null==c?"ge0":c}function p(a,b,c){function g(d,a){var e="action-default";if(null!=a)if(a.indexOf(".")>-1)return a.charAt(0)!="/"&&(a=o+a),'<img class="toolbar-img" src="'+a+'"/>';else e=a;if(null==a&&null!=d){if(typeof d=="object")d=d.name;typeof d=="string"&&(d.indexOf("add")==0||d.indexOf("batchAdd")==0||d.indexOf("new")==0?e="action-new":d.indexOf("remove")==0||d.indexOf("delete")==0?e="action-edit-delete":d.indexOf("update")==
0||d.indexOf("edit")==0||d.indexOf("batchEdit")==0?e="action-update":d.indexOf("export")==0?e="action-excel":d.indexOf("copy")==0?e="action-edit-copy":d.indexOf("print")==0?e="action-print":d.indexOf("refresh")==0?e="action-refresh":d.indexOf("close")==0?e="action-close":d.indexOf("save")==0?e="action-save":d.indexOf("download")==0&&(e="action-download"))}return'<span class="toolbar-icon '+e+'" ></span>'}function h(d,a){if(null==a)f.alert("action should not be null");else if(typeof a=="function")d.onclick=
a;else{if(typeof a=="string")a.indexOf("(")!=-1?d.onclick=function(){eval(a)}:a.indexOf(".action")!=-1?d.onclick=function(){Go(a)}:f.alert("unsuported action description:"+a);if(typeof a=="object")d.onclick=a.func}}function e(d){for(d=f.event.getTarget(d);d&&d.tagName.toLowerCase()!="div";)d=d.parentNode;var a=d.lastElementChild||d.lastChild;null==a?alert("menu is null then return and target is "+d):a.style.visibility!=""&&a.style.visibility!="hidden"?(a.style.visibility="hidden",d.className="toolbar-item-transfer"):
(a.style.visibility="visible",d.className="toolbar-item-selected")}function j(d,a){var b=document.createElement("table");b.className="toolbar-menu";b.id=d+"Table";var c=document.createElement("tbody");b.appendChild(c);if(jQuery("#"+d).find("span").length>0)b.onclick=function(d){e(d)};a.appendChild(b);this.table=b;this.addItem=function(d,a,e,b){var c=document.createElement("td");c.innerHTML=g(a,e)+d;c.onmouseout=k;c.onmouseover=i;c.title=b||d;h(c,a);c.className="toolbar-menuitem";c.width="100%";d=
document.createElement("tr");d.appendChild(c);this.table.tBodies.length==0&&this.table.appendChild(document.createElement("tbody"));this.table.tBodies[0].appendChild(d)}}function k(d){for(d=f.event.getTarget(d);d&&d.tagName.toLowerCase()!="td";)d=d.parentNode;if(d)d.className="toolbar-menuitem"}function i(d){for(d=f.event.getTarget(d);d&&d.tagName.toLowerCase()!="td";)d=d.parentNode;if(d)d.className="toolbar-menuitem-transfer"}function l(d){for(d=f.event.getTarget(d);d&&d.tagName.toLowerCase()!="div";)d=
d.parentNode;d&&jQuery(d).removeClass("toolbar-item").addClass("toolbar-item-transfer")}function m(d){for(d=f.event.getTarget(d);d&&d.tagName.toLowerCase()!="div";)d=d.parentNode;d&&jQuery(d).removeClass("toolbar-item-transfer").addClass("toolbar-item")}this.itemCount=0;this.bar=document.getElementById(a);if(null!=this.bar){this.id=a;this.separator="&nbsp;";this.bar.className="toolbar notprint";var o=self.location.pathname.substring(0,self.location.pathname.substring(1).indexOf("/")+1)+"/static/themes/"+
f.uitheme+"/icons/16x16/actions/";this.setTitle=function(d,a){if(d)a==null&&(a="action-info"),this.title_div.innerHTML=g(null,a)+"<strong>"+d+"</strong>"};this.setSeparator=function(d){this.separator=d};this.init=function(d,a){var e=document.createElement("div");e.className="toolbar-title";this.bar.appendChild(e);this.title_div=e;this.setTitle(d,a);e=document.createElement("div");e.className="toolbar-items";e.id=this.id+"_items";this.items_div=e;this.bar.appendChild(e);e=document.createElement("div");
e.className="toolbar-msg";e.style.display="none";e.id=this.id+"_msg";this.bar.appendChild(e)};this.init(b,c);this.addHr=function(){hrdiv=this.appendDiv(null,"toolbar-line");hrdiv.innerHTML='<img height="1" width="100%" align="top" src="'+o+'keyline.png" />'};this.addBack=function(d){null==d?this.addItem("\u8fd4\u56de",function(){history.back(-1)},"action-backward"):this.addItem(d,function(){history.back(-1)},"action-backward")};this.addHelp=function(d){this.addItem("\u5e2e\u52a9",function(){null==
d?f.alert("\u65bd\u5de5\u4e2d.."):window.open("help.action?helpId="+d)},"action-help-contents")};this.addPrint=function(d){null==d?this.addItem("\u6253\u5370","print()"):this.addItem(d,"print()")};this.addClose=function(d){if(""==d||null==d)d="\u5173\u95ed";this.addItem(d,"window.close()","action-close")};this.addItem=function(d,a,e,b,c){this.addSeparatorAsNeed();var f=document.createElement("div");f.innerHTML=g(a,e)+d;f.onmouseout=m;f.onmouseover=l;h(f,a);if(!c&&typeof a=="object")c=a.objectCount;
c||(c="ge0");f.className="toolbar-item toolbar-item-"+c+(c!="ge0"?" toolbar-item-disabled":"");f.title=b==null?d:b;this.items_div.appendChild(f);this.itemCount++;return f};this.addDiv=function(d){var a=document.createElement("div");if(d)a.className=d;this.items_div.appendChild(a);return a};this.appendDiv=function(d,a){var e=document.createElement("div");d&&e.setAttribute("id",d);if(a)e.className=a;document.getElementById(this.id).appendChild(e);return e};this.addSeparator=function(){if(this.separator)this.addDiv("toolbar-separator").innerHTML=
this.separator};this.addSeparatorAsNeed=function(){this.itemCount!=0&&this.addSeparator()};this.addBackOrClose=function(a,e){parent.location==self.location&&(window.history.length<=1||window.history.length==null)?this.addClose(null==e?"\u5173\u95ed":e):this.addBack(null==a?"\u540e\u9000":a)};this.addBlankItem=function(){this.addDiv("toolbar-group-separator").innerHTML="&nbsp;";this.itemCount++};this.setMessage=function(a){if(typeof a!="undefined")document.getElementById(this.id+"_msg").innerHTML=
a};this.addMenu=function(a,b,c,i){this.addSeparatorAsNeed();var k=document.createElement("div");k.className="toolbar-item";var o=this.id+this.itemCount+"_menu";k.id=o;k.tabIndex=0;k.title=i||a;k.onmouseout=m;k.onmouseover=l;this.items_div.appendChild(k);b==null?(k.innerHTML=g(null,c)+a+"&nbsp;"+g(null,"action-downarrow"),k.onclick=function(a){e(a)}):(i=document.createElement("span"),i.innerHTML=g(b,c)+a,h(i,b),a=document.createElement("span"),a.innerHTML=g(b,"action-downarrow"),a.onclick=function(a){e(a)},
k.appendChild(i),k.appendChild(a));k.onblur=function(a){a:{for(var e=f.event.getTarget(a);e&&e.tagName.toLowerCase()!="div";)e=e.parentNode;a=e.lastElementChild||e.lastChild;if(null==a||a.tagName.toLowerCase()!="table")alert("menu is null then return and target is "+e);else if(a.style.visibility!=""&&a.style.visibility!="hidden"){for(e=0;e<a.rows.length;e++)if(a.rows[e].cells[0].className=="toolbar-menuitem-transfer")break a;a.style.visibility="hidden"}}};b=new j(o,k);this.itemCount++;return b}}}
f.alert=function(a){alert(a)};f.uitheme="default";f.extend({"ui.toolbar":function(a,b,c){return new p(a,b,c)}});f.extend({"ui.gridbar":function(a,b){function c(a,e,b,c,f){for(var g=[],m=0;m<f.length;m++)g[m]=f[m].addMenu(a,e,b,c);this.addItem=function(a,e,b,c){for(var f=0;f<g.length;f++)g[f].addItem(a,e,b,c)}}this.divIds=a;this.pageId=null;this.title=b;this.toolbars=[];for(var g=0;g<a.length;g++)this.toolbars[g]=f.ui.toolbar(a[g],b),this.toolbars[g].setSeparator(""),document.getElementById(a[g]).className=
"gridbar",document.getElementById(a[g]+"_items").className="gridbar-items";this.pageId=function(a){this.pageId=a;return this};this.addItem=function(a,e,b,c){for(var f=0;f<this.toolbars.length;f++)this.toolbars[f].addItem(a,e,b,c)};this.addBack=function(a){for(var e=0;e<this.toolbars.length;e++)this.toolbars[e].addBack(a)};this.addBackOrClose=function(){for(var a=0;a<this.toolbars.length;a++)this.toolbars[a].addBackOrClose()};this.addBlankItem=function(a,e,b,c){for(var f=0;f<this.toolbars.length;f++)this.toolbars[f].addBlankItem(a,
e,b,c)};this.addPage=function(b,e,c){this.myPage=b;for(var g=0;g<this.toolbars.length;g++)pageDiv=this.toolbars[g].appendDiv(a[g]+"_page","girdbar-pgbar"),f.ui.pagebar(b,pageDiv,e,c);return this};this.addEntityAction=function(a,e){return new f.entityaction(a,e)};this.addPrint=function(a){for(var e=0;e<this.toolbars.length;e++)this.toolbars[e].addPrint(a)};this.addMenu=function(a,e,b,f){return new c(a,e,b,f,this.toolbars)}}});f.extend({"ui.pagebar":function(a,b,c,f){if(a.total!=0){c?c.length==0&&(c=
[a.pageSize]):c=[10,20,30,50,70,100,200,500,1E3];f||(f={first:"\u00ab First",previous:"\u2039 Previous",next:"Next \u203a",last:"Last \u00bb",no:"No:",size:"Size:",change:"Click me to change page size",pagesize:"Page Size"});var h=a.maxPageNo;addAnchor=function(e,c){var d=document.createElement("a");d.setAttribute("href","#");d.innerHTML=e;d.style.padding="0px 2px 0px 2px";b.appendChild(d);jQuery(d).click(function(){a.goPage(c)})};a.pageNo>1&&(addAnchor(f.first,1),addAnchor(f.previous,a.pageNo-1));
var e=document.createElement("span");e.innerHTML="<strong>"+a.startNo+"</strong> - <strong>"+a.endNo+"</strong> of <strong>"+a.total+"</strong>";e.style.padding="0px 2px 0px 2px";b.appendChild(e);e=jQuery(e);e.attr("title",f.change);e.mouseover(function(){this.className="pgbar-label"});e.mouseout(function(){this.className=""});e.click(function(){this.parentNode.style.marginTop="0px";this.nextSibling.style.display="";this.style.display="none"});e=document.createElement("span");e.style.display="none";
if(c&&c.length>0){var j=document.createElement("select");j.id=b.id+"_select";e.appendChild(j);j.className="pgbar-selbox";j.title=f.pagesize||"Page Size";for(var k=0,i=0;i<c.length;i++)c[i]==a.pageSize&&(k=i),j.options.add(new Option(f.size+c[i],c[i]));j.selectedIndex=k}c=document.createElement("input");c.className="pgbar-input";e.appendChild(c);j=document.createElement("label");e.appendChild(j);jQuery(j).attr("for",b.id+"_input").text("/"+h+" ").toggleClass("pgbar-input-label");h=jQuery(c);h.attr("value",
a.pageNo);h.attr("id",b.id+"_input");h.attr("title",a.startNo+" - "+a.endNo+" of "+a.total);h.focus(function(){this.value=""});h.blur(function(){if(!this.value)this.value=a.pageNo});h=document.createElement("input");h.setAttribute("type","button");h.setAttribute("name","gogo");h.value="Go";h.className="pgbar-go";e.appendChild(h);var l=function(){var e=document.getElementById(b.id+"_input").value,c=e.indexOf("/"+a.maxPageNo);-1!=c&&(e=e.substring(0,c));a.goPage(e,document.getElementById(b.id+"_select").value)};
jQuery(h).click(function(){l()});b.appendChild(e);jQuery(e).keypress(function(a){if(!a)a=window.event;if(a&&a.keyCode&&a.keyCode==13)return l(),!1});a.pageNo<a.maxPageNo&&(addAnchor(f.next,a.pageNo+1),addAnchor(f.last,a.maxPageNo))}}});f.extend({"ui.grid":{enableSingleRowSelect:!1,enableDynaBar:!1,overSortTableHeader:function(){this.style.color="white";this.style.backgroundColor="green"},outSortTableHeader:function(){this.style.borderColor="";this.style.color="";this.style.backgroundColor=""},mouseOverGrid:function(){if(typeof this.className!=
"undefined"){var a=this.className;selectIndex=a.indexOf("griddata-selected");if(-1==selectIndex)overIndex=a.indexOf("griddata-over"),this.className=-1==overIndex?a+" griddata-over":a.substring(0,overIndex)}},setGridMessage:function(a,b){var c=document.getElementById(a+"_bar1_msg"),f=document.getElementById(a+"_bar2_msg");if(c)c.style.display=b?"":"none",c.innerHTML=b?b:"";if(f)f.style.display=b?"":"none",f.innerHTML=b?b:""},toggleAll:function(a){for(var b=f.event.getTarget(a),a=b;a.tagName!=null&&
a.tagName.toLowerCase()!="table";)if(a=a.parentNode,null==a)break;if(null!=a){var c=0;jQuery("#"+a.id+" .gridselect").each(function(){b.checked?(jQuery(this).find("input").attr("checked","checked"),jQuery(this).parent("tr").addClass("griddata-selected"),c++):jQuery(this).find("input").is(":checked")&&(jQuery(this).find("input").removeAttr("checked"),jQuery(this).parent("tr").removeClass("griddata-selected"))});f.ui.grid.notifyGridbar(a.id,c)}},notifyGridbar:function(a,b){var c=function(){b>=2?jQuery(this).hasClass("toolbar-item-e1")?
jQuery(this).addClass("toolbar-item-disabled"):jQuery(this).removeClass("toolbar-item-disabled"):b==1?jQuery(this).hasClass("toolbar-item-ge2")?jQuery(this).addClass("toolbar-item-disabled"):jQuery(this).removeClass("toolbar-item-disabled"):jQuery(this).hasClass("toolbar-item-ge0")?jQuery(this).removeClass("toolbar-item-disabled"):jQuery(this).addClass("toolbar-item-disabled")};f.ui.grid.enableDynaBar&&(jQuery("#"+a+"_bar1_items .toolbar-item").each(c),jQuery("#"+a+"_bar2_items .toolbar-item").each(c));
b>1?f.ui.grid.setGridMessage(a,"\u5df2\u9009\u62e9 <b>"+b+"</b> \u6761"):f.ui.grid.setGridMessage(a,"")},toggleRow:function(a){for(var b=f.event.getTarget(a),c=b;c.tagName!=null&&c.tagName.toLowerCase()!="table";)if(c=c.parentNode,null==c)break;var g=!0,h=null,e=!1;if(null!=b&&b.tagName.toLowerCase()=="td"){for(h=b.parentNode.firstChild;h.tagName==null||h.tagName.toLowerCase()!="td";)h=h.nextSibling;e=b==h;for(b=h.firstChild;typeof b.tagName=="undefined"||b.tagName.toLowerCase()!="input";)if(b=b.nextSibling,
b==null)return;b.checked=!b.checked}else b.type=="checkbox"||b.type=="radio"?(h=b.parentNode,e=!0):g=!1;if(!(null==b||null==h||null==c||!g))if(g=h.parentNode,typeof g.className!="undefined"){b.checked?jQuery(g).removeClass("griddata-over").addClass("griddata-selected"):jQuery(g).removeClass("griddata-selected").addClass("griddata-over");var j=0;if(b.type=="radio")b.checked&&(j=1);else{var k=!f.ui.grid.enableSingleRowSelect||e||a.ctrlKey;jQuery("#"+c.id+" .gridselect").each(function(){jQuery(this).find("input").is(":checked")&&
(h!=this&&!k?(jQuery(this).find("input").removeAttr("checked"),jQuery(this).parent("tr").removeClass("griddata-selected")):j++)});k||jQuery("#"+c.id+" .gridselect-top").each(function(){jQuery(this).find("input").removeAttr("checked")})}f.ui.grid.notifyGridbar(c.id,j);if(typeof b.onchange=="function")b.onchange()}},sort:function(a,b){if(null==a)f.alert("\u65e0\u6cd5\u627e\u5230\u5143\u7d20\u5bf9\u5e94\u7684\u6392\u5e8f\u8868\u683c\uff01");else{var c=null,c=b.className=="gridhead-sortable"?typeof b.asc!=
"undefined"?b.asc:b.id+" asc":b.className=="gridhead-asc"?typeof b.desc!="undefined"?b.desc:b.id.replace(/\,/g," desc,")+" desc":"";a.goPage(1,null,c)}},init:function(a,b){var c=document.getElementById(a).tHead,g,h,e,j,k,i,l;if(c&&c.rows.length!=0){g=b.orderby;h=function(){f.ui.grid.sort(b,this)};for(j=0;j<c.rows.length;j++){k=c.rows[j];for(e=0;e<k.cells.length;e++)if(i=k.cells[e],i.className=="gridhead-sortable"&&null!=i.id){i.onclick=h;i.onmouseover=f.ui.grid.overSortTableHeader;i.onmouseout=f.ui.grid.outSortTableHeader;
i.title="\u70b9\u51fb\u6309 ["+i.innerHTML+"] \u6392\u5e8f";l=i.id.replace(/\,/g," desc,")+" desc";if(typeof i.desc!="undefined")l=i.desc;if(g.indexOf(l)!=-1)i.className="gridhead-desc",i.innerHTML+='<span class="gridhead-icon action-sort-desc"></span>';else{l=i.id+" asc";if(typeof i.asc!="undefined")l=i.asc;if(g==l)i.className="gridhead-asc",i.innerHTML+='<span class="gridhead-icon action-sort-asc"></span>'}}}if(c=document.getElementById(a+"_data"))for(j=0;j<c.rows.length;j++)g=c.rows[j],h=(h=g.className)?
" "+h:"",g.className=j%2==1?"griddata-odd"+h:"griddata-even"+h,g.onclick=f.ui.grid.toggleRow,g.onmouseover=f.ui.grid.mouseOverGrid,g.onmouseout=f.ui.grid.mouseOverGrid}},fillEmpty:function(a,b,c,f){a=document.getElementById(a);b-=c;b>7&&(b=7);b*=16;if(c==0)c=document.createElement("div"),c.innerHTML=f||"No result matched your search.",c.style.paddingTop=b/2-16+"px",a.appendChild(c);a.style.height=b+"px"}}});f.extend({entityaction:function(a,b){function c(a,b){var c=a.lastIndexOf("!"),f=a.lastIndexOf("."),
g=a,h="";-1==c&&(c=f);-1!=c&&(g=a.substring(0,c));-1!=f&&(h=a.substring(f));return g+"!"+b+h}this.entity=a;this.page=b;this.formid="form_"+f.randomInt();var g=this;this.getForm=function(){return this.page.getForm()};this.addParam=function(a,c){f.form.addInput(this.getForm(),a,c)};if(null!=this.page.target&&""!=this.page.target){var h=this.getForm();if(null!=h)h.target=this.page.target}this.beforeSubmmitId=function(e){var b=f.input.getCheckBoxValues(a+".id");if(b==null||b=="")return f.alert("\u4f60\u6ca1\u6709\u9009\u62e9\u8981\u64cd\u4f5c\u7684\u8bb0\u5f55\uff01"),
!1;b=this.getForm();b.action=c(this.page.actionurl,e);this.page.paramstr&&(f.form.addHiddens(b,this.page.paramstr),f.form.addParamsInput(b,this.page.paramstr));return!0};this.submitIdAction=function(a,b,c,g){this.beforeSubmmitId(a)&&(!(null!=c&&""!=c)||confirm(c))&&f.form.submitId(this.getForm(),this.entity+".id",b,null,null,g)};this.remove=function(a){a=a||"\u786e\u8ba4\u5220\u9664?";return new n("remove",function(){g.submitIdAction("remove",!0,a)},f.ui.grid.enableDynaBar?"ge1":"ge0")};this.add=
function(){return new n("add",function(){var a=g.getForm();""!=g.page.paramstr&&f.form.addHiddens(a,g.page.paramstr);f.form.addInput(a,g.entity+".id","");""!=g.page.paramstr&&f.form.addParamsInput(a,g.page.paramstr);f.form.submit(a,c(g.page.actionurl,"edit"))})};this.info=function(){return new n("info",function(){g.submitIdAction("info",!1)},f.ui.grid.enableDynaBar?"e1":"ge0")};this.edit=function(){return new n("edit",function(){g.submitIdAction("edit",!1)},f.ui.grid.enableDynaBar?"e1":"ge0")};this.single=
function(a,b,c){return new n(a,function(){var h=g.getForm();null!=c&&f.form.addHiddens(h,c);g.submitIdAction(a,!1,b)},f.ui.grid.enableDynaBar?"e1":"ge0")};this.multi=function(a,b,c,h){return new n(a,function(){try{var l=g.getForm();null!=c&&f.form.addHiddens(l,c);g.submitIdAction(a,!0,b,h)}catch(m){f.alert(m)}},f.ui.grid.enableDynaBar?"ge1":"ge0")};this.method=function(a,b,h,i){return new n(a,function(){var l=g.getForm();if(!(null!=b&&""!=b)||confirm(b))null!=h&&f.form.addHiddens(l,h),""!=g.page.paramstr&&
(f.form.addHiddens(l,g.page.paramstr),f.form.addParamsInput(l,g.page.paramstr)),f.form.submit(l,c(g.page.actionurl,a),null,null,i)})};this.exportData=function(a,b,c){b=b||"xls";a=a||"";c=c||"";c.indexOf("&")!=0&&(c="&"+c);return g.method("export",null,"&format="+b+"&properties="+a+c,!1)}}});f.extend({"ui.module":{moduleClick:function(a){a=document.getElementById(a);a.className=a.className=="module collapsed"?"module expanded":"module collapsed"}}});f.extend({"ui.load":function(a,b){var c=f.getContextPath();
a=="validity"?(jQuery.struts2_jquery.requireCss("/static/themes/"+f.uitheme+"/jquery.validity.css",c),jQuery.struts2_jquery.require("/static/scripts/jquery/jquery-validity-1.1.1.js",null,c),jQuery.struts2_jquery.require("/static/scripts/i18n/zh_CN/jquery.validity.js",b,c)):a=="tabletree"?(jQuery.struts2_jquery.requireCss("/static/themes/"+f.uitheme+"/beangle-ui-tabletree.css",c),jQuery.struts2_jquery.require("/static/scripts/beangle/beangle-ui-tabletree-3.0.0.js",b,c)):a=="colorbox"?(jQuery.struts2_jquery.requireCss("/static/themes/"+
f.uitheme+"/colorbox.css",c),jQuery.struts2_jquery.require("/static/scripts/jquery/jquery-colorbox-1.3.17.1.min.js",b,c)):a=="jquery.pstrength"&&(jQuery.struts2_jquery.requireCss("/static/themes/"+f.uitheme+"/jquery-pstrength.css",c),jQuery.struts2_jquery.require("/static/scripts/jquery/jquery-pstrength-2.1.js",b,c),jQuery.struts2_jquery.require("/static/scripts/i18n/zh_CN/jquery-pstrength.js",b,c))}})})(beangle);
