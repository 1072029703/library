(function(d){function l(a,d){this.name=a;this.func=d}function r(a,g,c){function e(b,a){return a.charAt(0)=="/"?a:b+a}function k(b){if(null==b)return n;if(typeof b=="object")b=b.name;return typeof b=="string"?b.indexOf("add")==0||b.indexOf("batchAdd")==0||b.indexOf("new")==0?"new.png":b.indexOf("remove")==0||b.indexOf("delete")==0?"edit-delete.png":b.indexOf("update")==0||b.indexOf("edit")==0||b.indexOf("batchEdit")==0?"update.png":b.indexOf("export")==0?"excel.png":b.indexOf("copy")==0?"edit-copy.png":
b.indexOf("print")==0?"print.png":b.indexOf("refresh")==0?"refresh.png":b.indexOf("close")==0?"close.png":b.indexOf("save")==0?"save.png":b.indexOf("download")==0?"download.png":n:n}function i(b,a){if(null==a)d.alert("action should not be null");else if(typeof a=="function")b.onclick=a;else{if(typeof a=="string")a.indexOf("(")!=-1?b.onclick=function(){eval(a)}:a.indexOf(".action")!=-1?b.onclick=function(){Go(a)}:d.alert("unsuported action description:"+a);if(typeof a=="object")b.onclick=a.func}}function h(b){for(b=
d.event.getTarget(b);b&&b.tagName.toLowerCase()!="div";)b=b.parentNode;var a=b.lastElementChild||b.lastChild;null==a?alert("menu is null then return and target is "+b):a.style.visibility!=""&&a.style.visibility!="hidden"?(a.style.visibility="hidden",b.className="toolbar-item-transfer"):(a.style.visibility="visible",b.className="toolbar-item-selected")}function m(b,a){var c=document.createElement("table");c.className="toolbar-menu";c.id=b+"Table";var d=document.createElement("tbody");c.appendChild(d);
if(jQuery("#"+b).find("span").length>0)c.onclick=function(b){h(b)};a.appendChild(c);this.table=c;this.addItem=function(b,a,c,h){var d=document.createElement("td");null==c&&(c=k(a));if(h==""||h==null)h=b;d.innerHTML='<img class="toolbar-icon" src="'+e(o,c)+'" alt="'+h+'" />'+b;d.onmouseout=f;d.onmouseover=j;i(d,a);d.className="toolbar-menuitem";d.width="100%";b=document.createElement("tr");b.appendChild(d);this.table.tBodies.length==0&&this.table.appendChild(document.createElement("tbody"));this.table.tBodies[0].appendChild(b)}}
function f(b){for(b=d.event.getTarget(b);b&&b.tagName.toLowerCase()!="td";)b=b.parentNode;if(b)b.className="toolbar-menuitem"}function j(b){for(b=d.event.getTarget(b);b&&b.tagName.toLowerCase()!="td";)b=b.parentNode;if(b)b.className="toolbar-menuitem-transfer"}function p(b){for(b=d.event.getTarget(b);b&&b.tagName.toLowerCase()!="div";)b=b.parentNode;if(b)b.className="toolbar-item-transfer"}function q(b){for(b=d.event.getTarget(b);b&&b.tagName.toLowerCase()!="div";)b=b.parentNode;if(b)b.className=
"toolbar-item"}this.itemCount=0;this.bar=document.getElementById(a);if(null!=this.bar){this.id=a;this.separator="&nbsp;";this.bar.className="toolbar notprint";var n="action.png",l=self.location.pathname.substring(0,self.location.pathname.substring(1).indexOf("/")+1)+"/static/themes/"+d.uitheme+"/icons/",o=l+"16x16/actions/";this.setTitle=function(b,a){if(b)a==null&&(a="info.png"),this.title_div.innerHTML='<img class="toolbar-icon" src="'+e(o,a)+'" /><strong>'+b+"</strong>"};this.setSeparator=function(b){this.separator=
b};this.init=function(b){var a=document.createElement("div");a.className="toolbar-title";this.bar.appendChild(a);this.title_div=a;this.setTitle(b);b=document.createElement("div");b.className="toolbar-msg";b.id=this.id+"_msg";this.bar.appendChild(b);b=document.createElement("div");b.className="toolbar-items";b.id=this.id+"_items";this.items_div=b;this.bar.appendChild(b)};this.init(g,c);this.addHr=function(){hrdiv=this.appendDiv(null,"toolbar-line");hrdiv.innerHTML='<img height="1" width="100%" align="top" src="'+
o+'keyline.png" />'};this.addBack=function(b){null==b?this.addItem("\u8fd4\u56de",function(){history.back(-1)},"backward.png"):this.addItem(b,function(){history.back(-1)},"backward.png")};this.addHelp=function(b){this.addItem("\u5e2e\u52a9",function(){null==b?d.alert("\u65bd\u5de5\u4e2d.."):window.open("help.action?helpId="+b)},"help-contents.png")};this.addPrint=function(b){null==b?this.addItem("\u6253\u5370","print()"):this.addItem(b,"print()")};this.addClose=function(b){if(""==b||null==b)b="\u5173\u95ed";
this.addItem(b,"window.close()","close.png")};this.addItem=function(b,a,c,d){this.addSeparatorAsNeed();var h=document.createElement("div");null==c&&(c=k(a));if(d==""||d==null)d=b;h.innerHTML='<img class="toolbar-icon" src="'+e(o,c)+'" alt="'+d+'" />'+b;h.onmouseout=q;h.onmouseover=p;i(h,a);h.className="toolbar-item";h.title=d;this.items_div.appendChild(h);this.itemCount++;return h};this.addDiv=function(b){var a=document.createElement("div");if(b)a.className=b;this.items_div.appendChild(a);return a};
this.appendDiv=function(b,a){var i=document.createElement("div");b&&i.setAttribute("id",b);if(a)i.className=a;document.getElementById(this.id).appendChild(i);return i};this.addSeparator=function(){if(this.separator)this.addDiv("toolbar-separator").innerHTML=this.separator};this.addSeparatorAsNeed=function(){this.itemCount!=0&&this.addSeparator()};this.addBackOrClose=function(b,a){parent.location==self.location&&(window.history.length<=1||window.history.length==null)?this.addClose(null==a?"\u5173\u95ed":
a):this.addBack(null==b?"\u540e\u9000":b)};this.addBlankItem=function(){this.addDiv("toolbar-group-separator").innerHTML="&nbsp;";this.itemCount++};this.setMessage=function(b){if(typeof b!="undefined")document.getElementById(this.id+"_msg").innerHTML=b};this.addMenu=function(b,a,c,g){this.addSeparatorAsNeed();var f=document.createElement("div");null==c&&(c=k(a));g=g||b;f.className="toolbar-item";var j=this.id+this.itemCount+"_menu";f.id=j;f.tabIndex=0;f.onmouseout=q;f.onmouseover=p;this.items_div.appendChild(f);
if(a==null)f.innerHTML='<img class="toolbar-icon" src="'+e(o,c)+'" alt="'+g+'" />'+b+'&nbsp;<img src="'+l+'8x8/actions/downarrow.png" class="toolbar-icon" />',f.onclick=function(a){h(a)};else{var n=document.createElement("span");n.innerHTML='<img class="toolbar-icon" src="'+e(o,c)+'" alt="'+g+'" />'+b;i(n,a);b=document.createElement("span");b.innerHTML='&nbsp;<img src="'+l+'8x8/actions/downarrow.png" class="toolbar-icon" />';b.onclick=function(a){h(a)};f.appendChild(n);f.appendChild(b)}f.onblur=function(a){a:{for(var b=
d.event.getTarget(a);b&&b.tagName.toLowerCase()!="div";)b=b.parentNode;a=b.lastElementChild||b.lastChild;if(null==a||a.tagName.toLowerCase()!="table")alert("menu is null then return and target is "+b);else if(a.style.visibility!=""&&a.style.visibility!="hidden"){for(b=0;b<a.rows.length;b++)if(a.rows[b].cells[0].className=="toolbar-menuitem-transfer")break a;a.style.visibility="hidden"}}};f=new m(j,f);this.itemCount++;return f}}}d.alert=function(a){alert(a)};d.uitheme="default";d.extend({"ui.toolbar":function(a,
d,c){return new r(a,d,c)}});d.extend({"ui.gridbar":function(a,g){function c(a,i,c,d,f){for(var e=[],g=0;g<f.length;g++)e[g]=f[g].addMenu(a,i,c,d);this.addItem=function(a,i,c,d){for(var b=0;b<e.length;b++)e[b].addItem(a,i,c,d)}}this.divIds=a;this.pageId=null;this.title=g;this.toolbars=[];for(var e=0;e<a.length;e++)this.toolbars[e]=d.ui.toolbar(a[e],g),this.toolbars[e].setSeparator(""),document.getElementById(a[e]).className="gridbar",document.getElementById(a[e]+"_items").className="gridbar-items";
this.pageId=function(a){this.pageId=a;return this};this.addItem=function(a,i,c,d){for(var f=0;f<this.toolbars.length;f++)this.toolbars[f].addItem(a,i,c,d)};this.addBack=function(a){for(var i=0;i<this.toolbars.length;i++)this.toolbars[i].addBack(a)};this.addBackOrClose=function(){for(var a=0;a<this.toolbars.length;a++)this.toolbars[a].addBackOrClose()};this.addBlankItem=function(a,i,c,d){for(var f=0;f<this.toolbars.length;f++)this.toolbars[f].addBlankItem(a,i,c,d)};this.addPage=function(c,i,h){this.myPage=
c;for(var g=0;g<this.toolbars.length;g++)pageDiv=this.toolbars[g].appendDiv(a[g]+"_page","girdbar-pgbar"),d.ui.pagebar(c,pageDiv,i,h);return this};this.addEntityAction=function(a,c){return new d.entityaction(a,c)};this.addPrint=function(a){for(var c=0;c<this.toolbars.length;c++)this.toolbars[c].addPrint(a)};this.addMenu=function(a,d,h,g){return new c(a,d,h,g,this.toolbars)}}});d.extend({"ui.pagebar":function(a,d,c,e){if(a.total!=0){c?c.length==0&&(c=[a.pageSize]):c=[10,20,30,50,70,100,200,500,1E3];
e||(e={first:"\u00ab First",previous:"\u2039 Previous",next:"Next \u203a",last:"Last \u00bb",no:"No:",size:"Size:",change:"Click me to change page size",pagesize:"Page Size"});var k=a.maxPageNo;addAnchor=function(c,i){var h=document.createElement("a");h.setAttribute("href","#");h.innerHTML=c;h.style.padding="0px 2px 0px 2px";d.appendChild(h);jQuery(h).click(function(){a.goPage(i)})};a.pageNo>1&&(addAnchor(e.first,1),addAnchor(e.previous,a.pageNo-1));var i=document.createElement("span");i.innerHTML=
"<strong>"+a.startNo+"</strong> - <strong>"+a.endNo+"</strong> of <strong>"+a.total+"</strong>";i.style.padding="0px 2px 0px 2px";d.appendChild(i);i=jQuery(i);i.attr("title",e.change);i.mouseover(function(){this.className="pgbar-label"});i.mouseout(function(){this.className=""});i.click(function(){this.parentNode.style.marginTop="0px";this.nextSibling.style.display="";this.style.display="none"});i=document.createElement("span");i.style.display="none";var h=document.createElement("input");i.innerHTML=
e.no;h.className="pgbar-input";i.appendChild(h);h=jQuery(h);h.attr("value",a.pageNo+"/"+k);h.attr("id",d.id+"_input");h.focus(function(){this.value=""});h.blur(function(){if(!this.value)this.value=a.pageNo+"/"+k});if(c&&c.length>0){h=document.createElement("select");h.id=d.id+"_select";i.appendChild(h);h.className="pgbar-selbox";h.title=e.pagesize||"Page Size";for(var m=0,f=0;f<c.length;f++)c[f]==a.pageSize&&(m=f),h.options.add(new Option(c[f],c[f]));h.selectedIndex=m}c=document.createElement("input");
c.setAttribute("type","button");c.setAttribute("name","gogo");c.value="Go";c.className="pgbar-go";i.appendChild(c);var j=function(){var c=document.getElementById(d.id+"_input").value,i=c.indexOf("/"+a.maxPageNo);-1!=i&&(c=c.substring(0,i));a.goPage(c,document.getElementById(d.id+"_select").value)};jQuery(c).click(function(){j()});d.appendChild(i);jQuery(i).keypress(function(a){if(!a)a=window.event;if(a&&a.keyCode&&a.keyCode==13)return j(),!1});a.pageNo<a.maxPageNo&&(addAnchor(e.next,a.pageNo+1),addAnchor(e.last,
a.maxPageNo))}}});d.extend({"ui.grid":{overSortTableHeader:function(){this.style.color="white";this.style.backgroundColor="green"},outSortTableHeader:function(){this.style.borderColor="";this.style.color="";this.style.backgroundColor=""},mouseOverGrid:function(){if(typeof this.className!="undefined"){var a=this.className;selectIndex=a.indexOf("griddata-selected");if(-1==selectIndex)overIndex=a.indexOf("griddata-over"),this.className=-1==overIndex?a+" griddata-over":a.substring(0,overIndex)}},onRowChange:function(a){var a=
d.event.getTarget(a),g=!0;if(null!=a&&a.tagName.toLowerCase()=="td"){for(a=a.parentNode.firstChild;a.tagName==null||a.tagName.toLowerCase()!="td";)a=a.nextSibling;for(a=a.firstChild;typeof a.tagName=="undefined"||a.tagName.toLowerCase()!="input";)if(a=a.nextSibling,a==null)return;a.checked=!a.checked}else a.type=="checkbox"||a.type=="radio"||(g=!1);if(null!=a&&g){if(typeof a.onchange=="function")a.onchange();if(a.type!="radio"&&(g=a.parentNode.parentNode,typeof g.className!="undefined")){var c=g.className.indexOf("griddata-selected");
if(a.checked)-1==c&&(g.className+=" griddata-selected");else if(-1!=c)g.className=g.className.substring(0,c)}}},sort:function(a,g){if(null==a)d.alert("\u65e0\u6cd5\u627e\u5230\u5143\u7d20\u5bf9\u5e94\u7684\u6392\u5e8f\u8868\u683c\uff01");else{var c=null,c=g.className=="gridhead-sortable"?typeof g.asc!="undefined"?g.asc:g.id+" asc":g.className=="gridhead-asc"?typeof g.desc!="undefined"?g.desc:g.id.replace(/\,/g," desc,")+" desc":"";a.goPage(1,null,c)}},init:function(a,g){var c=document.getElementById(a).tHead,
e,k,i,h,m,f,j;if(c&&c.rows.length!=0){e=g.orderby;k=function(){d.ui.grid.sort(g,this)};for(h=0;h<c.rows.length;h++){m=c.rows[h];for(i=0;i<m.cells.length;i++)if(f=m.cells[i],f.className=="gridhead-sortable"&&null!=f.id){f.onclick=k;f.onmouseover=d.ui.grid.overSortTableHeader;f.onmouseout=d.ui.grid.outSortTableHeader;f.title="\u70b9\u51fb\u6309 ["+f.innerHTML+"] \u6392\u5e8f";j=f.id.replace(/\,/g," desc,")+" desc";if(typeof f.desc!="undefined")j=f.desc;if(e.indexOf(j)!=-1)f.className="gridhead-desc",
f.innerHTML=f.innerHTML+'<img src="'+d.getContextPath()+"/static/themes/"+d.uitheme+'/icons/16x16/actions/sort-desc.png"  style="border:0"  alt="Arrow" />';else{j=f.id+" asc";if(typeof f.asc!="undefined")j=f.asc;if(e==j)f.className="gridhead-asc",f.innerHTML=f.innerHTML+'<img src="'+d.getContextPath()+"/static/themes/"+d.uitheme+'/icons/16x16/actions/sort-asc.png"  style="border:0"  alt="Arrow" />'}}}if(c=document.getElementById(a+"_data"))for(h=0;h<c.rows.length;h++)e=c.rows[h],k=(k=e.className)?
" "+k:"",e.className=h%2==1?"griddata-odd"+k:"griddata-even"+k,e.onclick=d.ui.grid.onRowChange,e.onmouseover=d.ui.grid.mouseOverGrid,e.onmouseout=d.ui.grid.mouseOverGrid}},fillEmpty:function(a,d,c,e){a=document.getElementById(a);d-=c;d>7&&(d=7);d*=16;if(c==0)c=document.createElement("div"),c.innerHTML=e||"No result matched your search.",c.style.paddingTop=d/2-16+"px",a.appendChild(c);a.style.height=d+"px"}}});d.extend({entityaction:function(a,g){function c(a,c){var d=a.lastIndexOf("!"),f=a.lastIndexOf("."),
e=a,g="";-1==d&&(d=f);-1!=d&&(e=a.substring(0,d));-1!=f&&(g=a.substring(f));return e+"!"+c+g}this.entity=a;this.page=g;this.formid="form_"+d.randomInt();var e=this;this.getForm=function(){return this.page.getForm()};this.addParam=function(a,c){d.form.addInput(this.getForm(),a,c)};if(null!=this.page.target&&""!=this.page.target){var k=this.getForm();if(null!=k)k.target=this.page.target}this.beforeSubmmitId=function(i){var h=d.input.getCheckBoxValues(a+".id");if(h==null||h=="")return d.alert("\u4f60\u6ca1\u6709\u9009\u62e9\u8981\u64cd\u4f5c\u7684\u8bb0\u5f55\uff01"),
!1;h=this.getForm();h.action=c(this.page.actionurl,i);this.page.paramstr&&(d.form.addHiddens(h,this.page.paramstr),d.form.addParamsInput(h,this.page.paramstr));return!0};this.submitIdAction=function(a,c,e,f){this.beforeSubmmitId(a)&&(!(null!=e&&""!=e)||confirm(e))&&d.form.submitId(this.getForm(),this.entity+".id",c,null,null,f)};this.remove=function(a){a=a||"\u786e\u8ba4\u5220\u9664?";return new l("remove",function(){e.submitIdAction("remove",!0,a)})};this.add=function(){return new l("add",function(){var a=
e.getForm();""!=e.page.paramstr&&d.form.addHiddens(a,e.page.paramstr);d.form.addInput(a,e.entity+".id","");""!=e.page.paramstr&&d.form.addParamsInput(a,e.page.paramstr);d.form.submit(a,c(e.page.actionurl,"edit"))})};this.info=function(){return new l("info",function(){e.submitIdAction("info",!1)})};this.edit=function(){return new l("edit",function(){e.submitIdAction("edit",!1)})};this.single=function(a,c,g){return new l(a,function(){var f=e.getForm();null!=g&&d.form.addHiddens(f,g);e.submitIdAction(a,
!1,c)})};this.multi=function(a,c,g,f){return new l(a,function(){try{var j=e.getForm();null!=g&&d.form.addHiddens(j,g);e.submitIdAction(a,!0,c,f)}catch(k){d.alert(k)}})};this.method=function(a,h,g,f){return new l(a,function(){var j=e.getForm();if(!(null!=h&&""!=h)||confirm(h))null!=g&&d.form.addHiddens(j,g),""!=e.page.paramstr&&(d.form.addHiddens(j,e.page.paramstr),d.form.addParamsInput(j,e.page.paramstr)),d.form.submit(j,c(e.page.actionurl,a),null,null,f)})};this.exportData=function(a,c,d){c=c||"xls";
a=a||"";d=d||"";d.indexOf("&")!=0&&(d="&"+d);return e.method("export",null,"&format="+c+"&properties="+a+d,!1)}}});d.extend({"ui.module":{moduleClick:function(a){a=document.getElementById(a);a.className=a.className=="module collapsed"?"module expanded":"module collapsed"}}});d.extend({"ui.load":function(a,g){var c=d.getContextPath();a=="validity"?(jQuery.struts2_jquery.requireCss("/static/themes/"+d.uitheme+"/jquery.validity.css",c),jQuery.struts2_jquery.require("/static/scripts/jquery/jquery.validity-1.1.1.js",
null,c),jQuery.struts2_jquery.scriptCache["/static/scripts/i18n/zh_CN/jquery.validity.js"]&&g?g():jQuery.struts2_jquery.require("/static/scripts/i18n/zh_CN/jquery.validity.js",g,c)):a=="tabletree"?(jQuery.struts2_jquery.requireCss("/static/themes/"+d.uitheme+"/beangle-ui-tabletree.css",c),jQuery.struts2_jquery.require("/static/scripts/beangle/beangle-ui-tabletree.js",g,c)):a=="colorbox"?(jQuery.struts2_jquery.requireCss("/static/themes/"+d.uitheme+"/colorbox.css",c),jQuery.struts2_jquery.require("/static/scripts/jquery/jquery-colorbox-1.3.17.1.min.js",
g,c)):a=="jquery.pstrength"&&(jQuery.struts2_jquery.requireCss("/static/themes/"+d.uitheme+"/jquery-pstrength.css",c),jQuery.struts2_jquery.require("/static/scripts/jquery/jquery-pstrength.2.1.js",g,c),jQuery.struts2_jquery.require("/static/scripts/i18n/zh_CN/jquery-pstrength.js",g,c))}})})(beangle);
